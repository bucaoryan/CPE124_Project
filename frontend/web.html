<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>WoT Project</title>
</head>
<body>
    <div class="logo"><img src="spray.png"></div>
    <header>
        <p class="title">CONTACTLESS ALCOHOL DISPENSER</p>
        <div class="mainpage1"align="right"><a href="/system-act.html">System Activity</a></div>
    </header>

    <section class="firstsection">
        <div class="box-main">
            <div class="firstHalf">
                <div class="first-class"><p class="blankspace">&zwnj;</p><h1>VOLUME CAPACITY  </h1>
                <p class="blankspace">&zwnj;  </p>
                <p id="volumeCapacity" class="volumeCapacity">Full</p></div>
                <div class="first-class"><p class="blankspace">&zwnj;</p><h1>TOTAL COUNT </h1>
                <p class="blankspace">&zwnj;  </p>
                <p id="totalCount" class="totalCount">0</div></p>
                <div class="first-class"><p class="blankspace">&zwnj;</p><h1>DATE AND TIME </h1>
                <p class="blankspace">&zwnj;  </p>
                <input type="text" id="dateAndTime" class="dateAndTime" disabled></div>
            </div>
        </div>
    </section>
 
    <section class="secondsection">
    </section>

    <footer class="background">
        <p class="text-footer">GROUP03 CPE124_E01</p>
    </footer>

    <script src="socket.io/socket.io.js"></script>
    </script>
    <script>
        var today = new Date();
        var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
        var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
        var dateTime = date+' '+time;
        document.getElementById("dateAndTime").value = dateTime;
        
        //var socket = io.connect();
        const socket = io('http://localhost:3000')
        var totalCount = 0;
        var totalPumps = 0;
        var measurement_ml = 450

        socket.on('message', function(data){
            console.log(data);
            counter()
        })
        function counter(){
            const count = document.getElementById('totalCount') // total count of people
            const status = document.getElementById('volumeCapacity') //system status
            
            count.innerHTML = 0;
            count.innerHTML = totalCount;
            //totalPumps = 450;
            if (totalPumps < measurement_ml)
            {
                status.innerHTML = "FULL";
                status.setAttribute("style","color:green");
            } else {
                status.innerHTML = "EMPTY";
                status.setAttribute("style","color:red");
            }
       }
    </script>
</body>
</html>
